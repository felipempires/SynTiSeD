# Notes
Some additions to the site packages [nilmtk](https://github.com/nilmtk/nilmtk) and [nilmtk-contrib](https://https://github.com/nilmtk/nilmtk-contrib) so that validation datasets can be added via the experimental api of nilmtk-contrib for the algorithms DAE, RNN, WindowGRU, Seq2Seq and Seq2Point algorithms.

## Installation
Add the corresponding files from the [nilmtk folder](https://github.com/mmeism/SynTiSeD_research/tree/main/site-packages/nilmtk) and [nilmtk_contrib folder](https://github.com/mmeism/SynTiSeD_research/tree/main/site-packages/nilmtk_contrib) to the appropriate places in the existing package and use the API as usual (see example below). 

## Example API
```
from nilmtk.api_val import API_val
from nilmtk_contrib.disaggregate import DAE_val, Seq2Point_val, Seq2Seq_val, RNN_val, WindowGRU_val

gelap = {
    'power': {
        'mains': ['apparent', 'active'],
        'appliance': ['apparent', 'active']
    },
    'sample_rate': 2,

    'appliances': ['kettle'],
    'methods': {
        'RNN': RNN_val({}),
        'WindowGRU': WindowGRU_val({}),
        'DAE': DAE_val({}),
        'Seq2Seq': Seq2Seq_val({}),
        'Seq2Point': Seq2Point_val({}),
    },
    'train': {
        'datasets': {
            'Dataport': {
                'path': './data/gelap_1.h5',
                'buildings': {
                    1: {
                        'start_time': '2021-01-01',
                        'end_time': '2021-01-14'
                    },
                }
            }
        }
    },
    'validate': {
        'datasets': {
            'Dataport': {
                'path': './data/gelap_1.h5',
                'buildings': {
                    7: {
                        'start_time': '2019-10-24',
                        'end_time': '2019-11-24'
                    },
                }
            }
        }
    },
    'test': {
        'datasets': {
            'Dataport_1': {
                'path': './data/gelap_1.h5',
                'buildings': {
                    8: {
                        'start_time': '2020-01-03',
                        'end_time': '2020-01-31'
                    },
                }
            },
            'Dataport_2': {
                'path': './data/gelap_1.h5',
                'buildings': {
                    11: {
                        'start_time': '2019-12-12',
                        'end_time': '2019-12-29'
                    },
                }
            }
        },
        'metrics': ['f1score', 'mae']
    }
}

api_res = API_val(gelap)
```
